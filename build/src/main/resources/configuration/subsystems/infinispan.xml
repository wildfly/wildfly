<?xml version='1.0' encoding='UTF-8'?>
<!--  See src/resources/configuration/ReadMe.txt for how the configuration assembly works -->
<config default-supplement="default">
    <extension-module>org.jboss.as.clustering.infinispan</extension-module>
    <subsystem xmlns="urn:jboss:domain:infinispan:1.3">
        <?CACHE-CONTAINERS?>
    </subsystem>
    <supplement name="default">
        <replacement placeholder="CACHE-CONTAINERS">
            <cache-container name="hibernate" default-cache="local-query" module="org.jboss.as.jpa.hibernate:4">
                <local-cache name="entity">
                    <transaction mode="NON_XA"/>
                    <eviction strategy="LRU" max-entries="10000"/>
                    <expiration max-idle="100000"/>
                </local-cache>
                <local-cache name="local-query">
                    <transaction mode="NONE"/>
                    <eviction strategy="LRU" max-entries="10000"/>
                    <expiration max-idle="100000"/>
                </local-cache>
                <local-cache name="timestamps">
                    <transaction mode="NONE"/>
                    <eviction strategy="NONE"/>
                </local-cache>
            </cache-container>
        </replacement>
    </supplement>
    <supplement name="ha">
        <replacement placeholder="CACHE-CONTAINERS">
            <cache-container name="cluster" aliases="ha-partition" default-cache="default">
                <transport lock-timeout="60000"/>
                <replicated-cache name="default" mode="SYNC" batching="true">
                    <locking isolation="REPEATABLE_READ"/>
                </replicated-cache>
            </cache-container>
            <cache-container name="web" aliases="standard-session-cache" default-cache="repl" module="org.jboss.as.clustering.web.infinispan">
                <transport lock-timeout="60000"/>
                <replicated-cache name="repl" mode="ASYNC" batching="true">
                    <file-store/>
                </replicated-cache>
                <replicated-cache name="sso" mode="SYNC" batching="true"/>
                <distributed-cache name="dist" mode="ASYNC" batching="true" l1-lifespan="0">
                    <file-store/>
                </distributed-cache>
            </cache-container>
            <cache-container name="ejb" aliases="sfsb sfsb-cache" default-cache="repl" module="org.jboss.as.clustering.ejb3.infinispan">
                <transport lock-timeout="60000"/>
                <replicated-cache name="repl" mode="ASYNC" batching="true">
                    <eviction strategy="LRU" max-entries="10000"/>
                    <file-store/>
                </replicated-cache>
                <!-- Clustered cache used internally by EJB subsytem for managing the client-mapping(s) of
                the socketbinding referenced by the EJB remoting connector -->
                <replicated-cache name="remote-connector-client-mappings" mode="SYNC" batching="true"/>
                <distributed-cache name="dist" mode="ASYNC" batching="true" l1-lifespan="0">
                    <eviction strategy="LRU" max-entries="10000"/>
                    <file-store/>
                </distributed-cache>
            </cache-container>
            <cache-container name="hibernate" default-cache="local-query" module="org.jboss.as.jpa.hibernate:4">
                <transport lock-timeout="60000"/>
                <local-cache name="local-query">
                    <transaction mode="NONE"/>
                    <eviction strategy="LRU" max-entries="10000"/>
                    <expiration max-idle="100000"/>
                </local-cache>
                <invalidation-cache name="entity" mode="SYNC">
                    <transaction mode="NON_XA"/>
                    <eviction strategy="LRU" max-entries="10000"/>
                    <expiration max-idle="100000"/>
                </invalidation-cache>
                <replicated-cache name="timestamps" mode="ASYNC">
                    <transaction mode="NONE"/>
                    <eviction strategy="NONE"/>
                </replicated-cache>
            </cache-container>
           <cache-container name="capedwarf" default-cache="default">
               <transport lock-timeout="60000"/>
               <!-- distributed-cache name="default" owners="2" mode="ASYNC" indexing="LOCAL" -->
               <distributed-cache name="default" mode="ASYNC" indexing="LOCAL">
                   <transaction mode="NON_XA"/>
                   <eviction strategy="NONE"/>
                   <file-store preload="true" purge="false"/>
                   <indexing-properties>
                       <property name="hibernate.search.default.directory_provider">infinispan</property>
                       <property name="hibernate.search.infinispan.cachemanager_jndiname">java:jboss/infinispan/container/HibernateSearch</property>
                       <property name="hibernate.search.default.worker.backend">jgroups</property>
                   </indexing-properties>
               </distributed-cache>
               <replicated-cache name="data" mode="ASYNC">
                   <transaction mode="NON_XA"/>
                   <eviction strategy="NONE"/>
                   <file-store preload="true" purge="false"/>
               </replicated-cache>
               <replicated-cache name="metadata" mode="ASYNC">
                   <transaction mode="NON_XA"/>
                   <eviction strategy="NONE"/>
                   <file-store preload="true" purge="false"/>
               </replicated-cache>
               <replicated-cache name="memcache" mode="ASYNC">
                   <transaction mode="NON_XA" locking="PESSIMISTIC"/>
                   <eviction strategy="NONE"/>
               </replicated-cache>
               <distributed-cache name="dist" mode="ASYNC">
                   <transaction mode="NON_XA" locking="PESSIMISTIC"/>
                   <eviction strategy="NONE"/>
                   <file-store preload="true" purge="false"/>
               </distributed-cache>
               <distributed-cache name="tasks" mode="ASYNC" indexing="LOCAL">
                   <transaction mode="NON_XA"/>
                   <eviction strategy="LIRS" max-entries="10000"/>
                   <file-store preload="true" purge="false"/>
                   <indexing-properties>
                       <property name="hibernate.search.default.directory_provider">infinispan</property>
                       <property name="hibernate.search.infinispan.cachemanager_jndiname">java:jboss/infinispan/container/HibernateSearch</property>
                       <property name="hibernate.search.default.worker.backend">jgroups</property>
                   </indexing-properties>
               </distributed-cache>
           </cache-container>
           <cache-container name="HibernateSearch" default-cache="LuceneIndexesMetadata">
					<transport lock-timeout="60000"/>
					<replicated-cache name="LuceneIndexesMetadata" mode="SYNC" batching="true">
					    <transaction mode="NONE"/>
					    <eviction strategy="NONE"/>
					    <file-store preload="true" purge="false"/>
					</replicated-cache>
					<replicated-cache name="LuceneIndexesData" mode="SYNC" batching="true">
					    <transaction mode="NONE"/>
					    <eviction strategy="NONE"/>
					    <file-store preload="true" purge="false"/>
					</replicated-cache>
					<replicated-cache name="LuceneIndexesLocking" mode="SYNC" batching="true">
					    <transaction mode="NONE"/>
					    <eviction strategy="NONE"/>
					</replicated-cache>
           </cache-container>

       </replacement>
   </supplement>
</config>